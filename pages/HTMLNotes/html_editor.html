<html>
<!-- made from HTMLNotes -->
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HTML editor (alpha version)</title>
    <style>
/* CSS */
:root {
  --bg-main: #05f;
  --bg-editor: #eee;
  --text-color: #000;
  --btn-grad: linear-gradient(215deg, #000, #444);
}
[data-theme="dark"] {
  --bg-main: #1a1a1a;
  --bg-editor: #2d2d2d;
  --text-color: #ffffff;
  --btn-grad: linear-gradient(215deg, #444, #666);
}
body {
  background: var(--bg-main);
  font-family: sans-serif;
  padding: 15px;
  color: var(--text-color);
  transition: 0.3s;
}
#text1 {
  box-sizing: border-box;
  width: 400px;
  height: 275px;
  background: var(--bg-editor);
  color: var(--text-color);
  max-width: 1175px;
  min-width: 225px;
  max-height: 875px;
  min-height: 95px;
  border: 1px solid #999;
}
#frame1 {
  width: 650px;
  height: 650px;
  background: #fff;
}
button {
  background: var(--btn-grad);
  color: #fff;
  border: 2px solid #aaa;
  padding: 4px 9px;
  border-radius: 14px;
  cursor: pointer;
  margin-bottom: 5px;
}
/* END */
    </style>
  </head>
  <body>
    <div class="markdown-src">
<!-- HTML -->
<button onclick="toggleTheme()" style="background: #f39c12;">Change theme</button><br>
<textarea id='text1' placeholder="Enter the HTML code here"></textarea><br><br>
<button onclick="document.getElementById('frame1').requestFullscreen()">Full-screen viewing</button>
<iframe id='frame1'></iframe><br>
<!-- Control buttons -->
<button onclick="saveToFile()">Export/Save to .html</button>
<button onclick="document.getElementById('fileInput').click()">Import/Load from .html</button>
<button onclick="clearAll()" style="background: #e74c3c;">Clear all</button>
<input type="file" id="fileInput" style="display:none" onchange="importFromFile(this)">
<!-- END -->
    </div>
    <div style="display: none;"></div>
    <script>
      let datakey = "__ORBITAL_NOTES__:notedataid=7pOBtnJnbq"
      let inframe = (window!=window.top)
      window.Note = {}
      window.Note.data =
/* JSON */
"<a>Hi :3</a>";
/* END */
      (function(){
        window.Note.save = saveData
        window.Note.load = loadData
        window.Note.autoSave = autoSave
        function getNoteModule(){
          if(!window['Note']) window.Note = {}
          return window.Note
        }
        function loadData(){
          let note = getNoteModule()
          if(!inframe){
            try{
              let savedata = localStorage.getItem(datakey)
              if(savedata && savedata.length){
                note.data = JSON.parse(savedata)
              }
              window.addEventListener("message", onMessage)
            } catch(e){
              console.log("No local data")
              console.log(e)
            }
          } else {
            return note.data
          }
        }

        let firstLogCall = true
        let originalLogFunc = console.log
        function log(x, ...rest){
          if(firstLogCall)
            document.body.appendChild(document.createElement("hr"))
         else
            document.body.appendChild(document.createElement("br"))
          document.body.appendChild(
            document.createTextNode(x + " " + rest.join(" ")))
          firstLogCall = false
          originalLogFunc(x, ...rest)
        }
        console.log = log

        let SaveInterval = 500

        window.addEventListener("load", ()=>{
          convertMarkdown()
          autoSave()
          loadData() // dont wait for async
        })
        let saveIntervalRef = null
        function autoSave(enable){
          if(enable === undefined) enable = true
          clearInterval(saveIntervalRef)
          if(enable){
            saveIntervalRef = window.setInterval(saveData, SaveInterval)
          }
        }
        // this is preferred over a 'localstorage' polyfill for a frame,
        // so the programmer doesn't assume this is the browsers localstorage
        function saveData(){
          let note = getNoteModule()
          if(inframe){
            let msg_obj = {
              action: "saveData",
              data: JSON.stringify(note['data'])
            }
            let message = JSON.stringify(msg_obj)
            window.parent.postMessage(message)
          } else {
            localStorage.setItem(datakey, JSON.stringify(note['data']))
          }
        }
        let md_subs = [
          /(\n|^)\s*######\s([^\s#].*)\n*/g, "\n<h6 id=\"$2\">$2</h6>\n",
          /(\n|^)\s*#####\s([^\s#].*)\n*/g, "\n<h5 id=\"$2\">$2</h5>\n",
          /(\n|^)\s*####\s*([^\s#].*)\n*/g, "\n<h4 id=\"$2\">$2</h4>\n",
          /(\n|^)\s*###\s*([^\s#].*)\n*/g, "\n<h3 id=\"$2\">$2</h3>\n",
          /(\n|^)\s*##\s*([^\s#].*)\n*/g, "\n<h2 id=\"$2\">$2</h2>\n",
          /(\n|^)\s*#\s*([^\s#].*)\n*/g, "\n<h1 id=\"$2\">$2</h1>\n",
          /\n(\s*)[\*\-](.*)/g, '\n<ul><li>$2</li></ul>',
          /\n+\n(?=[^#\n])/g, "\n\n<br><br>",
          /\n+\n/g, "\n",
          /__([^_\n]*)__/g, "<b>$1</b>",
          /\*\*([^_\n]*)\*\*/g, "<b>$1</b>",
          /_([^_\n]*)_/g, "<i>$1</i>",
          /\*([^_\n]*)\*/g, "<i>$1</i>",
          /\!\[([^\]\n]*)\]\(([^\)\n]*)\)/g, "<img src=\"$2\" alt=\"$1\"></img>",
          /\[([^\]\n]*)\]\(([^\)\n]*)\)/g, "<a href=\"$2\" target=\"_blank\">$1</a>",
        ]
        function onMessage(){
          try{
            let message = JSON.parse(e.data)
            // console.log('received message', message)
            if(message.hasOwnProperty("event")){
              if(message.event == "keydown" && typeof keydown != "undefined"){
                keydown(message)
              }
              if(message.event == "keyup" && typeof keyup != "undefined"){
                keydown(message)
              }
            }
          } catch(e){
            console.warn("error processing message: " + e.data)
          }
        }
        function convertMarkdown(){
          let containers = document.getElementsByClassName("markdown-src")
          for(let j=0; j<containers.length; ++j){
            let container = containers[j]
            let src = container.innerHTML
            for(var i=0; i<md_subs.length-1; i += 2){
              var search = md_subs[i]
              var replace = md_subs[i+1]
              src = src.replace(search, replace)
            }
            container.innerHTML = src
          }
        }
      })()
      //window.addEventListener('load', htmlNotesMainFunc)
      //function htmlNotesMainFunc(){
/* JS */
// version 2.1.68
// original gist.githubusercontent.com/derekmc/8fe6d62bdc07d0af10be87a7adfde0d2/raw/a6523c82964cd58dec44027d75621a8698d38f52/simple_editor.html
setInterval(update, 500)
let data = Note.data ?? {}

window.addEventListener("load", init)
setTimeout(init, 200)
function init(){
  frame1.srcdoc = text1.value = Note.data
  update()
}

// Export (generated by AI)
function saveToFile() {
  const text = document.getElementById('text1').value;
  const blob = new Blob([text], { type: 'text/html' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'saveCode.html';
  link.click();
  URL.revokeObjectURL(link.href);
}
// Import (generated by AI)
function importFromFile(input) {
  const file = input.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(e) {
    const content = e.target.result;
    // Updating the input field and Note.data
    document.getElementById('text1').value = content;
    Note.data = content;
    frame1.srcdoc = content;
    // We reset the input so that we can upload the same file again.
    input.value = '';
    alert('The data is imported!');
  };
  reader.readAsText(file);
}

function toggleTheme() {
  const doc = document.documentElement;
  if (doc.getAttribute('data-theme') === 'dark') {
    doc.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
  } else {
    doc.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
  }
}
if (localStorage.getItem('theme') === 'dark') {
  document.documentElement.setAttribute('data-theme', 'dark');
}
function clearAll() {
  if (confirm("Are you sure you want to clean up all the code?")) {
    text1.value = "";
    update();
    saveData();
  }
}
function update(){
  if(Note.data != text1.value){
    frame1.srcdoc = Note.data = text1.value
   // Note.data = text1.value
  }
}
/* END */
      //}
    </script>
  </body>
</html>